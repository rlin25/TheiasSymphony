<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Theias Symphony - Music Visualizer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Main visualization canvas -->
        <canvas id="visualizer" width="1200" height="800"></canvas>
        
        <!-- Control overlay (hidden by default) -->
        <div id="controls" class="controls hidden">
            <div class="control-panel">
                <h3>Theias Symphony Controls</h3>
                <div class="control-group">
                    <label for="sensitivity">Beat Sensitivity:</label>
                    <input type="range" id="sensitivity" min="0.1" max="2.0" step="0.1" value="0.7">
                    <span id="sensitivity-value">0.7</span>
                </div>
                <div class="control-group">
                    <label for="colorSpeed">Color Cycle Speed:</label>
                    <input type="range" id="colorSpeed" min="0.1" max="3.0" step="0.1" value="1.0">
                    <span id="colorSpeed-value">1.0</span>
                </div>
                <div class="control-group">
                    <label for="smoothing">Waveform Smoothing:</label>
                    <input type="range" id="smoothing" min="0.1" max="1.0" step="0.1" value="0.8">
                    <span id="smoothing-value">0.8</span>
                </div>
                <div class="control-buttons">
                    <button id="fullscreenBtn">Toggle Fullscreen (F11)</button>
                    <button id="hideControlsBtn">Hide Controls (H)</button>
                </div>
            </div>
        </div>

        <!-- Status overlay -->
        <div id="status" class="status">
            <div class="status-item">
                <span class="status-label">Audio:</span>
                <span id="audioStatus" class="status-value">Initializing...</span>
            </div>
            <div class="status-item">
                <span class="status-label">FPS:</span>
                <span id="fpsCounter" class="status-value">--</span>
            </div>
        </div>

        <!-- Loading screen -->
        <div id="loading" class="loading">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <h2>Theias Symphony</h2>
                <p>Initializing audio capture...</p>
                <div class="loading-tips">
                    <p>• Press F11 for fullscreen</p>
                    <p>• Press H to show/hide controls</p>
                    <p>• Press ESC to exit fullscreen</p>
                </div>
            </div>
        </div>

        <!-- Error overlay -->
        <div id="error" class="error hidden">
            <div class="error-content">
                <h2>Audio Capture Error</h2>
                <p id="errorMessage">Unable to access system audio</p>
                <div class="error-actions">
                    <button id="retryBtn">Retry</button>
                    <button id="settingsBtn">Audio Settings</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Keyboard shortcuts help -->
    <div id="help" class="help hidden">
        <div class="help-content">
            <h3>Keyboard Shortcuts</h3>
            <ul>
                <li><kbd>F11</kbd> - Toggle fullscreen</li>
                <li><kbd>ESC</kbd> - Exit fullscreen</li>
                <li><kbd>H</kbd> - Show/hide controls</li>
                <li><kbd>?</kbd> - Show/hide this help</li>
                <li><kbd>R</kbd> - Reset to defaults</li>
            </ul>
            <p>Press <kbd>?</kbd> again to hide this help.</p>
        </div>
    </div>

    <script src="working-renderer.js"></script>
</body>
</html>